{
    "name": "bheisig/idoitcli",
    "description": "Access your CMDB on the command line interface",
    "type": "project",
    "keywords": ["i-doit", "cmdb", "it documentation", "cli", "api", "json-rpc"],
    "homepage": "https://github.com/bheisig/i-doit-cli",
    "license": "AGPL-3.0+",
    "authors": [
        {
            "name": "Benjamin Heisig",
            "email": "benjamin@heisig.name",
            "homepage": "https://benjamin.heisig.name/",
            "role": "Developer"
        }
    ],
    "support": {
        "issues": "https://github.com/bheisig/i-doit-cli/issues",
        "source": "https://github.com/bheisig/i-doit-cli"
    },
    "require": {
        "php": ">=7.0.0",
        "ext-bz2": "*",
        "ext-Phar": "*",
        "bheisig/cli": "@DEV",
        "bheisig/idoitapi": "^0.6"
    },
    "require-dev": {
        "macfja/phar-builder": "^0.2.6",
        "phploc/phploc": "^4.0",
        "phpmd/phpmd" : "@stable",
        "phpstan/phpstan": "^0.9.2",
        "sebastian/phpcpd": ">=3.0.1",
        "sensiolabs/security-checker": "^4.1",
        "squizlabs/php_codesniffer": "*",
        "theseer/phpdox": "^0.11.0"
    },
    "autoload": {
        "psr-4": {
            "bheisig\\idoitcli\\": "src/"
        }
    },
    "bin": ["bin/idoit"],
    "scripts": {
        "ci": [
            "@composer system-check",
            "@composer syntax-check",
            "@composer find-forbidden",
            "./vendor/bin/security-checker security:check --end-point=http://security.sensiolabs.org/check_lock",
            "@composer phpcpd",
            "@composer phpcs",
            "@composer phpstan",
            "@composer build",
            "@composer test",
            "@composer dist",
            "@composer clean"
        ],
        "clean": [
            "rm -f `composer config extra.name`",
            "rm -rf *.tar.gz ./`composer config extra.name`-`composer config extra.version`/",
            "rm -f `composer config extra.name`.phar `composer config extra.name`.phar.asc"
        ],
        "build": [
            "@composer dump-autoload --classmap-authoritative",
            "php -d phar.readonly=0 ./vendor/bin/phar-builder package --quiet composer.json",
            "mv `composer config extra.name`.phar `composer config extra.name`",
            "chmod +x `composer config extra.name`",
            "@composer dump-autoload"
        ],
        "dist": [
            "@composer is-built",
            "rm -rf ./`composer config extra.name`-`composer config extra.version`/",
            "mkdir ./`composer config extra.name`-`composer config extra.version`/",
            "cp -r `composer config extra.name` ./`composer config extra.name`-`composer config extra.version`/",
            "cp -r CHANGELOG.md  ./`composer config extra.name`-`composer config extra.version`/",
            "cp -r CONTRIBUTING.md ./`composer config extra.name`-`composer config extra.version`/",
            "cp -r LICENSE ./`composer config extra.name`-`composer config extra.version`/",
            "cp -r README.md ./`composer config extra.name`-`composer config extra.version`/",
            "cp -r docs/ ./`composer config extra.name`-`composer config extra.version`/",
            "tar czf `composer config extra.name`-`composer config extra.version`.tar.gz ./`composer config extra.name`-`composer config extra.version`/",
            "rm -r ./`composer config extra.name`-`composer config extra.version`/"
        ],
        "find-forbidden": [
            "! grep -rEn \"(var_dump|die|exit)\" src/*"
        ],
        "gitstats": "gitstats -c project_name=`composer config extra.name` . gitstats",
        "gource": "gource -1280x720 --seconds-per-day 3 --auto-skip-seconds 1 --title `composer config extra.name`",
        "is-built": "test -x `composer config extra.name` || ( echo 'Run \"composer build\" first' && exit 1 )",
        "phive": [
            "@composer is-built",
            "cp `composer config extra.name` `composer config extra.name`.phar",
            "gpg --detach-sign --output `composer config extra.name`.phar.asc `composer config extra.name`.phar"
        ],
        "phpcpd": "./vendor/bin/phpcpd src/",
        "phpcs": "./vendor/bin/phpcs --extensions=php --standard=PSR1,PSR2 --exclude=PSR2.Classes.ClassDeclaration,Squiz.Functions.MultiLineFunctionDeclaration bin/ src/",
        "phpdox": "./vendor/bin/phpdox",
        "phploc": "./vendor/bin/phploc --exclude=vendor --exclude=docs .",
        "phpmd": "./vendor/bin/phpmd src text cleancode,codesize,controversial,design,naming,unusedcode",
        "phpstan": "./vendor/bin/phpstan analyze -l max src",
        "security-checker": "./vendor/bin/security-checker security:check ./composer.lock",
        "syntax-check": "php -l src/",
        "system-check": [
            "php --version",
            "php -m",
            "php --info | grep -E \"(max_execution_time|memory_limit)\"",
            "@composer --version",
            "@composer validate",
            "@composer diagnose || echo \"Ignore warnings\"",
            "@composer check-platform-reqs",
            "@composer config extra.version"
        ],
        "test": [
            "@composer is-built",
            "./`composer config extra.name` --help",
            "./`composer config extra.name` --version",
            "for command in $(./`composer config extra.name` list --no-colors | awk '{print $1}'); do echo \"Run command $command\" ; ./`composer config extra.name` \"$command\" --help > /dev/null || echo \"Command $command failed with non-zero exit code\"; done"
        ],
        "win-ci": [
            "@composer win-system-check",
            "@composer win-build"
        ],
        "win-build": [
            "@composer dump-autoload --classmap-authoritative",
            "./vendor/bin/phar-builder.bat package --quiet composer.json",
            "mv \"$(composer config extra.name).phar\" \"$(composer config extra.name)\"",
            "@composer dump-autoload"
        ],
        "win-system-check": [
            "php --version",
            "php -m",
            "@composer --version",
            "@composer validate",
            "@composer diagnose & exit 0",
            "@composer check-platform-reqs"
        ]
    },
    "scripts-descriptions": {
        "ci": "Perform continuous integration tasks",
        "clean": "Cleanup project directory",
        "build": "Create a binary",
        "dist": "Create a distribution tarball",
        "find-forbidden": "Find forbidden words in source code",
        "gitstats": "Create Git statistics",
        "gource": "Visualize Git history",
        "is-built": "Test whether binary is already built",
        "phive": "Build PHIVE files",
        "phpcpd": "Detect copy/paste in source code",
        "phpcs": "Detect violations of defined coding standards",
        "phpdox": "Create source code documentation",
        "phploc": "Print source code statistics",
        "phpmd": "Detect mess in source code",
        "phpstan": "Analyze source code",
        "security-checker": "Look for dependencies with known security vulnerabilities",
        "syntax-check": "Check syntax of source code",
        "system-check": "Run some system checks",
        "test": "Perform some tests with the built binary"
    },
    "extra": {
        "name": "idoitcli",
        "version": "0.5",
        "phar-builder": {
            "skip-shebang": false,
            "include-dev": false,
            "entry-point": "bin/idoitcli.php",
            "compression": "BZip2",
            "name": "idoitcli.phar",
            "output-dir": "./",
            "include": ["config"]
        }
    }
}
